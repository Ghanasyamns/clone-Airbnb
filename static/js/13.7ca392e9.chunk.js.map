{"version":3,"sources":["pages/Accounts/Bookings.js","pages/Accounts/AccountSideBar.js","pages/Accounts/ChangePassword.js","pages/Accounts/Account.js"],"names":["Bookings","props","cancelBookings","bid","location","a","console","log","swal","text","icon","buttons","cancelUrl","window","apiHost","data","token","axios","post","cancelResp","msg","title","bookings","booking","map","i","dates","moment","checkIn","format","checkOut","className","type","status","venueData","conf","numberOfGuests","totalNights","pricePerNight","totalPrice","onClick","id","AccountSideBar","src","alt","to","ChangePassword","state","oldPassword","newPassword","checkOldPW","e","preventDefault","setState","target","value","checkNewPW","submitPW","url","email","auth","password","resp","pwUrl","onSubmit","this","placeholder","onChange","name","Component","Account","useSelector","shallowEqual","useState","pastBookings","setPastBookings","upcomingBookings","setUpcomingBookings","useEffect","axiosUrl","forEach","today","diff","push","fetchdata","exact","path","render"],"mappings":"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","file":"static/js/13.7ca392e9.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport React from \"react\";\r\nimport swal from \"sweetalert\";\r\nfunction Bookings(props) {\r\n  const cancelBookings = async (bid, location) => {\r\n    console.log(bid, location);\r\n    const cancelReservation = await swal({\r\n      text: `Are you sure you want to cancel your trip to ${location}`,\r\n      icon: \"warning\",\r\n      buttons: true,\r\n    });\r\n    if (cancelReservation) {\r\n      const cancelUrl = `${window.apiHost}/reservation/cancel`;\r\n      const data = {\r\n        token: props.token,\r\n        bid: bid,\r\n      };\r\n      const cancelResp = await axios.post(cancelUrl, data);\r\n      console.log(cancelResp.data);\r\n      if (cancelResp.data.msg === \"cancelled\") {\r\n        swal({\r\n          title: \"canceled\",\r\n          icon: \"success\",\r\n        });\r\n      } else {\r\n        swal({\r\n          title: \"there was an error cancelling\",\r\n          icon: \"error\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n  const bookings = props.booking.map((booking, i) => {\r\n    const dates = `${moment(booking.checkIn).format(\"MMM Do\")}-${moment(\r\n      booking.checkOut\r\n    ).format(\"MMM Do YYYY\")}`;\r\n\r\n    return (\r\n      <tr key={i} className=\"booking-row\">\r\n        <td>\r\n          {props.type === \"past\" && booking.status === \"confirmed\"\r\n            ? \"Completed\"\r\n            : booking.status}\r\n        </td>\r\n        <td>\r\n          <div className=\"booking-detail\">{dates}</div>\r\n          <div className=\"booking-detail\">{booking.venueData.title}</div>\r\n          <div className=\"booking-detail\">{booking.venueData.location}</div>\r\n        </td>\r\n        <td>\r\n          <div className=\"booking-detail\">Confirmation #: {booking.conf}</div>\r\n          <div className=\"booking-detail\">\r\n            {booking.numberOfGuests} Guests, {booking.totalNights} Nights\r\n          </div>\r\n          <div className=\"booking-detail\">\r\n            ${booking.pricePerNight} per night\r\n          </div>\r\n          <div className=\"booking-detail\">${booking.totalPrice} Total</div>\r\n        </td>\r\n        <td>\r\n          <div className=\"booking-detail pointer\">Print Reservation</div>\r\n          {props.type === \"upcoming\" && booking.status !== \"cancelled\" ? (\r\n            <div\r\n              onClick={() => {\r\n                cancelBookings(booking.id, booking.venueData.location);\r\n              }}\r\n              className=\"booking-detail pointer\"\r\n            >\r\n              Cancel Confirmation\r\n            </div>\r\n          ) : (\r\n            <></>\r\n          )}\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n  return (\r\n    <table className=\"booking\">\r\n      <thead>\r\n        <tr>\r\n          <th>Status</th>\r\n          <th>Dates and location</th>\r\n          <th>Details</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>{bookings}</tbody>\r\n    </table>\r\n  );\r\n}\r\nexport default Bookings;\r\n","import React from \"react\";\r\nimport \"./Account.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction AccountSideBar(props) {\r\n  return (\r\n    <ul className=\"sidenav sidenav-fixed\">\r\n      <li>\r\n        <div className=\"user-view valign-wrapper center-align\">\r\n          <img\r\n            className=\"\"\r\n            src=\"https://airbnb-clone-prexel-images.s3.amazonaws.com/genericAvatar.png\"\r\n            alt=\"...\"\r\n          />\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/account/reservations/confirmed\">Confirmed Reservations</Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/account/reservations/past\">Past Reservations</Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/account/change-pass\">Change Password</Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default AccountSideBar;\r\n","import axios from \"axios\";\r\nimport React, { Component } from \"react\";\r\nimport swal from \"sweetalert\";\r\nclass ChangePassword extends Component {\r\n  state = { oldPassword: \"\", newPassword: \"\" };\r\n  checkOldPW = async (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      oldPassword: e.target.value,\r\n    });\r\n  };\r\n  checkNewPW = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      newPassword: e.target.value,\r\n    });\r\n  };\r\n  submitPW = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const url = `${window.apiHost}/users/login`;\r\n    const data = {\r\n      email: this.props.auth.email,\r\n      password: this.state.oldPassword,\r\n    };\r\n    const resp = await axios.post(url, data);\r\n    // badPass = valid username, but wrong passwrod\r\n    // -- noEmail = email is not registered\r\n    if (resp.data.msg === \"badPass\") {\r\n      swal({\r\n        title: \"Invaid Password\",\r\n        text: \"The Password you provided is wrong\",\r\n        icon: \"error\",\r\n      });\r\n    } else if (resp.data.msg === \"loggedIn\") {\r\n      const pwUrl = `${window.apiHost}/users/change-password`;\r\n      const data = {\r\n        token: this.props.auth.token,\r\n        newPassword: this.state.newPassword,\r\n      };\r\n      const respPw = await axios.post(pwUrl, data);\r\n      if (respPw.data.msg === \"passUpdated\") {\r\n        swal({\r\n          title: \"Password updated\",\r\n          icon: \"success\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <form onSubmit={this.submitPW}>\r\n          <input\r\n            className=\"oldPw \"\r\n            id=\"oldpass\"\r\n            placeholder=\"enter old password\"\r\n            onChange={this.checkOldPW}\r\n          ></input>\r\n          <div>\r\n            <input\r\n              className=\"newPw \"\r\n              id=\"newpass\"\r\n              placeholder=\"enter new password\"\r\n              onChange={this.checkNewPW}\r\n            ></input>\r\n          </div>\r\n          <div className=\"button \">\r\n            <button\r\n              className=\"btn waves-effect waves-light\"\r\n              type=\"submit\"\r\n              name=\"action\"\r\n            >\r\n              Submit\r\n              <i className=\"material-icons right\">send</i>\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default ChangePassword;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./Account.css\";\r\nimport { useSelector, shallowEqual } from \"react-redux\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Bookings from \"./Bookings\";\r\nimport AccountSideBar from \"./AccountSideBar\";\r\nimport ChangePassword from \"./ChangePassword\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nfunction Account(props) {\r\n  const auth = useSelector((state) => state.auth, shallowEqual);\r\n  const [pastBookings, setPastBookings] = useState([]);\r\n  const [upcomingBookings, setUpcomingBookings] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const axiosUrl = `${window.apiHost}/users/getBookings`;\r\n    const data = {\r\n      token: auth.token,\r\n    };\r\n    const fetchdata = async () => {\r\n      const resp = await axios.post(axiosUrl, data);\r\n\r\n      let pastBookings = [];\r\n      let upcomingBookings = [];\r\n      resp.data.forEach((booking) => {\r\n        const today = moment();\r\n        const checkOutDate = moment(booking.checkOut);\r\n        const diffdays = checkOutDate.diff(today, \"days\");\r\n        if (diffdays < 0) {\r\n          pastBookings.push(booking);\r\n        } else {\r\n          upcomingBookings.push(booking);\r\n        }\r\n      });\r\n      setPastBookings(pastBookings);\r\n      setUpcomingBookings(upcomingBookings);\r\n    };\r\n    fetchdata();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"account container-fluid\">\r\n      <AccountSideBar />\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col s8 offset-s3\">\r\n          <Route\r\n            exact\r\n            path=\"/account\"\r\n            render={() => <h1>choose an option on the left</h1>}\r\n          />\r\n          <Route\r\n            exact\r\n            path=\"/account/reservations/confirmed\"\r\n            render={() => (\r\n              <Bookings\r\n                type=\"upcoming\"\r\n                booking={upcomingBookings}\r\n                token={auth.token}\r\n              />\r\n            )}\r\n          />\r\n          <Route\r\n            exact\r\n            path=\"/account/reservations/past\"\r\n            render={() => <Bookings type=\"past\" booking={pastBookings} />}\r\n          />\r\n          <Route\r\n            exact\r\n            path=\"/account/change-pass\"\r\n            render={() => <ChangePassword auth={auth} />}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// export default connect(mapStateToProps)(Account);\r\nexport default Account;\r\n"],"sourceRoot":""}