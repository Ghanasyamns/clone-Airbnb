(this["webpackJsonpclone-airbnb"]=this["webpackJsonpclone-airbnb"]||[]).push([[9],{126:function(e,t,s){},139:function(e,t,s){"use strict";s.r(t);var n=s(55),a=s.n(n),c=s(56),i=s(13),r=s(14),o=s(16),l=s(15),d=s(57),u=s.n(d),j=s(0),h=(s(126),s(3));var p=function(e){var t=e.pointDesc.find((function(t){return t.pointTitle===e.point}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"point-title",children:e.point}),Object(h.jsx)("div",{className:"point-desc",children:t.text})]})},b=s(27),m=s(59),v=s(9),O=s(63),g=s(71),x=s.n(g),f=s(61),N=s.n(f);var w=function(e){return new Promise((function(t,s){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(){console.log("script loading"),t()},document.getElementsByTagName("head")[0].appendChild(n),console.log("the script has been added to the head")}))},k=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){var e;Object(i.a)(this,s);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={singleVenue:{},points:[]},e.changeCheckIn=function(t){e.setState({checkIn:t.target.value})},e.chageCheckout=function(t){e.setState({checkout:t.target.value})},e.changeNumberOfGuests=function(t){e.setState({numberOfGuests:t.target.value})},e.reserveNow=Object(c.a)(a.a.mark((function t(){var s,n,c,i,r,o,l,d,j,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=x()(e.state.checkIn),n=x()(e.state.checkout),!((c=n.diff(s,"days"))<1)){t.next=7;break}N()({title:"Check out date must be after Check in date",icon:"error"}),t.next=20;break;case 7:return i=e.state.singleVenue.pricePerNight,r=i*c,"https://js.stripe.com/v3",o="pk_test_5198HtPL5CfCPYJ3X8TTrO06ChWxotTw6Sm2el4WkYdrfN5Rh7vEuVguXyPrTezvm3ntblRX8TpjAHeMQfHkEpTA600waD2fMrT",t.next=13,w("https://js.stripe.com/v3");case 13:return l=window.Stripe(o),d="".concat(window.apiHost,"/payment/create-session"),j={venueData:e.state.singleVenue,totalPrice:r,diffDays:c,pricePerNight:i,checkIn:e.state.checkIn,checkOut:e.state.checkout,token:e.props.auth.token,numberOfGuest:e.state.numberOfGuest,currency:"INR"},t.next=18,u.a.post(d,j);case 18:h=t.sent,l.redirectToCheckout({sessionId:h.data.id}).then((function(e){console.log(e)}));case 20:case"end":return t.stop()}}),t)}))),e}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,s,n,c,i,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.vid,s="".concat(window.apiHost,"/venue/").concat(t),e.next=4,u.a.get(s);case 4:return n=e.sent,c=n.data,i="".concat(window.apiHost,"/points/get"),e.next=9,u.a.get(i);case 9:r=e.sent,o=c.points.split(",").map((function(e,t){return Object(h.jsx)(p,{pointDesc:r.data,point:e},t)})),this.setState({singleVenue:c,points:o});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.singleVenue;return Object(h.jsxs)("div",{className:"row single-venue",children:[Object(h.jsx)("div",{className:"col s12 center",children:Object(h.jsx)("img",{src:t.imageUrl,alt:"singimg"})}),Object(h.jsxs)("div",{className:"col s8 location-details offset-s2",children:[Object(h.jsxs)("div",{className:"col s8 left-details",children:[Object(h.jsx)("div",{className:"location",children:t.location}),Object(h.jsx)("div",{className:"title",children:t.title}),Object(h.jsxs)("div",{className:"guests",children:[t.guests," guests"]}),Object(h.jsx)("div",{className:"divider"}),this.state.points,Object(h.jsx)("div",{className:"details",children:t.details}),Object(h.jsx)("div",{className:"amenities",children:t.amenities})]}),Object(h.jsxs)("div",{className:"col s4 right-details",children:[Object(h.jsxs)("div",{className:"price-per-day",children:["\u20b9",t.pricePerNight," ",Object(h.jsx)("span",{children:"per day"})]}),Object(h.jsxs)("div",{className:"rating",children:[t.rating," "]}),Object(h.jsxs)("div",{className:"col s6",children:["CHeck-In",Object(h.jsx)("input",{type:"date",onChange:this.changeCheckIn})]}),Object(h.jsxs)("div",{className:"col s6",children:["CHeck-Out",Object(h.jsx)("input",{type:"date",onChange:this.chageCheckout})]}),Object(h.jsx)("div",{className:"col s12",children:Object(h.jsxs)("select",{onChange:this.changeNumberOfGuests,className:"browser-default",children:[Object(h.jsx)("option",{value:"1",children:"1 Guest"}),Object(h.jsx)("option",{value:"2",children:"2 Guest"}),Object(h.jsx)("option",{value:"3",children:"3 Guest"}),Object(h.jsx)("option",{value:"4",children:"4 Guest"}),Object(h.jsx)("option",{value:"5",children:"5 Guest"}),Object(h.jsx)("option",{value:"6",children:"6 Guest"}),Object(h.jsx)("option",{value:"7",children:"7 Guest"}),Object(h.jsx)("option",{value:"8",children:"8 Guest"})]})}),Object(h.jsx)("div",{className:"col s12 center",children:this.props.auth.token?Object(h.jsx)("button",{onClick:this.reserveNow,className:"btn red accent-2",children:"Reserve"}):Object(h.jsxs)("div",{children:["You must be"," ",Object(h.jsxs)("span",{className:"login-text",onClick:function(){e.props.openModal("open",Object(h.jsx)(O.a,{}))},children:[" ","login"]})," ","to reserve"]})})]})]})]})}}]),s}(j.Component);t.default=Object(b.b)((function(e){return{auth:e.auth}}),(function(e){return Object(v.b)({openModal:m.a},e)}))(k)},59:function(e,t,s){"use strict";t.a=function(e,t){return{type:"OPEN_MODAL",payload:{openClose:e,content:t}}}},63:function(e,t,s){"use strict";var n=s(55),a=s.n(n),c=s(56),i=s(62),r=s(0),o=(s(72),s(27)),l=s(59),d=s(69),u=s(57),j=s.n(u),h=s(61),p=s.n(h),b=s(64),m=s(3);t.a=function(e){var t=Object(o.d)(),s=Object(r.useState)(""),n=Object(i.a)(s,2),u=n[0],h=n[1],v=Object(r.useState)(""),O=Object(i.a)(v,2),g=O[0],x=O[1],f=function(){var e=Object(c.a)(a.a.mark((function e(s){var n,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),n="".concat(window.apiHost,"/users/login"),c={email:u,password:g},e.next=5,j.a.post(n,c);case 5:"badPass"===(i=e.sent).data.msg?p()({title:"Invaid Password",text:"The Password you provided is wrong",icon:"error"}):"noEmail"===i.data.msg?p()({title:"Invalid Email",text:"The Email you provided is not registered",icon:"error"}):"loggedIn"===i.data.msg&&(p()({title:"Success",icon:"success"}),t(Object(b.a)(i.data)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"login-form",children:Object(m.jsxs)("form",{onSubmit:f,children:[Object(m.jsx)("button",{className:"facebook-login",children:"Connect With Facebook"}),Object(m.jsx)("button",{className:"google-login",children:"Connect With Google"}),Object(m.jsxs)("div",{className:"login-or center",children:[Object(m.jsx)("span",{children:"or"}),Object(m.jsx)("div",{className:"or-divider"})]}),Object(m.jsx)("input",{type:"text",className:"browser-default",placeholder:"Email address",onChange:function(e){return h(e.target.value)}}),Object(m.jsx)("input",{type:"password",className:"browser-default",placeholder:"Password",onChange:function(e){return x(e.target.value)}}),Object(m.jsx)("button",{type:"submit",className:"sign-up-button",children:"Login"}),Object(m.jsx)("div",{className:"divider"}),Object(m.jsxs)("div",{children:["Don't have an account?",Object(m.jsx)("span",{className:"hand_Symbol",onClick:function(){t(Object(l.a)("open",Object(m.jsx)(d.a,{})))},children:"Sign up"})]})]})})}},64:function(e,t,s){"use strict";t.a=function(e){return{type:"REGISTER_ACTION",payload:e}}},69:function(e,t,s){"use strict";var n=s(55),a=s.n(n),c=s(56),i=s(13),r=s(14),o=s(16),l=s(15),d=s(57),u=s.n(d),j=s(0),h=s(27),p=s(9),b=s(59),m=s(64),v=s(63),O=s(61),g=s.n(O),x=s(3),f=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).changeEmail=function(t){e.setState({email:t.target.value})},e.changePassword=function(t){e.setState({password:t.target.value})},e.showInputs=function(){e.setState({lowerPartOfForm:Object(x.jsx)(N,{changeEmail:e.changeEmail,changePassword:e.changePassword})})},e.submitLogin=function(){var t=Object(c.a)(a.a.mark((function t(s){var n,c,i,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),n="".concat(window.apiHost,"/users/signup"),c={email:e.state.email,password:e.state.password},t.next=5,u.a.post(n,c);case 5:i=t.sent,r=i.data.token,console.log(r),"userExists"===i.data.msg?g()({title:"Email Exists",text:"The Email you provided is already registered",icon:"error"}):"invalidData"===i.data.msg?g()({title:"Invalid Data",text:"Please provide valid Email and password",icon:"error"}):"userAdded"===i.data.msg&&(g()({title:"Success!",text:"Your account is created ",icon:"success"}),e.props.regAction(i.data));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={lowerPartOfForm:Object(x.jsx)("button",{type:"button",onClick:e.showInputs,className:"sign-up-button",children:"Sign up with email"})},e}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return console.log(this.props.auth),Object(x.jsx)("div",{className:"login-form",children:Object(x.jsxs)("form",{onSubmit:this.submitLogin,children:[Object(x.jsx)("button",{className:"facebook-login",children:"Connect With Facebook"}),Object(x.jsx)("button",{className:"google-login",children:"Connect With Google"}),Object(x.jsxs)("div",{className:"login-or center",children:[Object(x.jsx)("span",{children:"or"}),Object(x.jsx)("div",{className:"or-divider"})]}),this.state.lowerPartOfForm,Object(x.jsx)("div",{className:"divider"}),Object(x.jsxs)("div",{children:["Already have an account?"," ",Object(x.jsx)("span",{className:"hand_Symbol",onClick:function(){e.props.openModal("open",Object(x.jsx)(v.a,{}))},children:"Log in"})]})]})})}}]),s}(j.Component);function N(e){return Object(x.jsxs)("div",{className:"sign-up-wrapper",children:[Object(x.jsx)("div",{className:"col m12",children:Object(x.jsxs)("div",{className:"input-field",id:"email",children:[Object(x.jsx)("div",{className:"form-label ",children:"Email"}),Object(x.jsx)("input",{type:"text",placeholder:"Emai",onChange:e.changeEmail})]})}),Object(x.jsxs)("div",{className:"col m12",children:[Object(x.jsxs)("div",{className:"input-field",id:"password",children:[Object(x.jsx)("div",{className:"form-label ",children:"Password"}),Object(x.jsx)("input",{type:"password",placeholder:"Password",onChange:e.changePassword})]}),Object(x.jsx)("div",{className:"col m12",children:Object(x.jsx)("button",{type:"submit",className:"btn red accent-2",children:"SignUp"})})]})]})}t.a=Object(h.b)((function(e){return{auth:e.auth}}),(function(e){return Object(p.b)({openModal:b.a,regAction:m.a},e)}))(f)},72:function(e,t,s){}}]);
//# sourceMappingURL=9.25a22691.chunk.js.map